<section data-ng-controller="DashboardCategorizationController2" data-ng-init="init()">
    <br>
    <div class="row">
        <div class="col-sm-12">
            <div class="panel-heading">
                <ol class="breadcrumb">
                    <li>Dashboards</li>
                    <li>Portfolio definition</li>
                    <li class="active">Categorization</li>
                </ol>
            </div>
        </div>
    </div>
    <div class="col-xs-12">
        <div class="table table-responsive">
            <table class="table">
                <thead>
                <tr>
                    <th>
                        <div class="form-group-sm">
                            <select id="catGroup" class="form-control" data-ng-model="filterCategorization.group"
                                    data-ng-options="item as item.name for item in categoryGroups">
                                <option value="">--category group</option>
                            </select>
                        </div>
                    </th>
                    <th>
                        <div class="form-group-sm">
                            <select id="category" class="form-control" data-ng-model="filterCategorization.category"
                                    data-ng-options="item as item.name for item in filterCategorization.group.categories">
                                <option value="">--category</option>
                            </select>
                        </div>
                    </th>
                    <th>
                        <span>Category value</span>
                    </th>
                    <th colspan="2">
                        <span>N. of projects</span>
                        <button class="btn btn-xs" data-ng-click="orderTable = 'countCategoryValue'">
                            <span class="glyphicon glyphicon-sort-by-attributes-alt"></span>
                        </button>
                    </th>
                    <th colspan="2">
                        <span>Earmarked funds</span>
                        <button class="btn btn-xs" data-ng-click="orderTable = 'fundsCategoryValue'">
                            <span class="glyphicon glyphicon-sort-by-attributes-alt"></span>
                        </button>
                    </th>
                </tr>
                </thead>
                <tbody>
                <tr data-ng-repeat="catObj in projectCategorization | orderBy : orderTable : true
                | filter : (!!filterCategorization.group || undefined) && {group:{_id: filterCategorization.group._id}}
                | filter : (!!filterCategorization.category || undefined) && {category:{_id: filterCategorization.category._id}}">
                    <td>{{catObj.group.name}}</td>
                    <td>{{catObj.category.name}}</td>
                    <td data-ng-show="catObj.categoryValue">{{catObj.categoryValue.name}}</td>
                    <td data-ng-show="!catObj.categoryValue"><span class="text-muted">Unassigned</span></td>
                    <td>{{catObj.countCategoryValue}}</td>
                    <td>{{catObj.countCategoryValueRatio * 100 | number : 1}}%</td>
                    <td>{{catObj.fundsCategoryValue}}</td>
                    <td>{{catObj.fundsCategoryValueRatio * 100 | number : 1}}%</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
    <!--<div class="row" data-ng-repeat="groupObj in projectCategorization">-->
        <!--<div class="col-md-12">-->
            <!--<div class="row">-->
                <!--<div class="col-md-3">-->
                    <!--<h4>{{groupObj.group.name}}</h4>-->
                <!--</div>-->
            <!--</div>-->
            <!--<div class="row" data-ng-repeat="catObj in groupObj.categories">-->
                <!--<div class="col-md-12">-->
                    <!--<div class="row">-->
                        <!--<div class="col-md-3 col-md-offset-1">-->
                            <!--<h4>{{catObj.category.name}}</h4>-->
                        <!--</div>-->
                    <!--</div>-->
                    <!--<div class="row">-->
                        <!--<div class="col-md-3 col-md-offset-2">-->
                            <!--<span><b>Category value</b></span>-->
                        <!--</div>-->
                        <!--<div class="col-md-3">-->
                            <!--<span><b>N. of projects</b></span>-->
                        <!--</div>-->
                        <!--<div class="col-md-3">-->
                            <!--<span><b>Earmarked funds</b></span>-->
                        <!--</div>-->
                    <!--</div>-->
                    <!--<div class="row" data-ng-repeat="valueObj in catObj.categoryValues">-->
                        <!--<div class="col-md-3 col-md-offset-2">-->
                            <!--<span data-ng-show="valueObj.categoryValue"><em>{{valueObj.categoryValue.name}}</em></span>-->
                            <!--<span data-ng-show="!valueObj.categoryValue"><em>Unassigned</em></span>-->
                        <!--</div>-->
                        <!--<div class="col-md-3 ">-->
                            <!--<span>{{valueObj.countCategoryValue}}</span>-->
                        <!--</div>-->
                        <!--<div class="col-md-3 ">-->
                            <!--<span>{{valueObj.fundsCategoryValue}}</span>-->
                        <!--</div>-->
                    <!--</div>-->
                <!--</div>-->
            <!--</div>-->
        <!--</div>-->
    <!--</div>-->
</section>
