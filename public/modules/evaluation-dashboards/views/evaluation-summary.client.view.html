<section data-ng-controller="EvaluationSummaryController as parentCtrl" data-ng-init="parentCtrl.init()">
	<br>
	<div class="row">
		<div class="col-sm-12">
			<div class="panel-heading">
				<ol class="breadcrumb">
					<li>Dashboards</li>
					<li>Portfolio evaluation</li>
					<li class="active">Evaluation summary</li>
				</ol>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-3"><!-- PORTFOLIO LIST -->
			<div class="panel panel-default">
				<div class="panel-heading">
					<h6 class="panel-title text-center">Portfolio tree</h6>
				</div>
				<div class="panel-body" style="min-height: 500px;  max-height: 500px; overflow-y: auto;">
					<div class="alert alert-warning text-center" data-ng-hide="!parentCtrl.portfolios.$resolved || parentCtrl.portfolios.length">
						No portfolios yet
					</div>
					<div class="row">
						<div class="col-md-12">
							<ul>
								<li>
									<button class="btn btn-default btn-sm btn-warning" style="overflow: hidden; margin: 1%;"
											data-ng-click="parentCtrl.selectPortfolio('all')">
										All
									</button>
								</li>
							</ul>
						</div>
					</div>
					<div class="row">
						<div class="col-md-12">
							<ul>
								<li>
									<button class="btn btn-default btn-sm btn-warning" style="overflow: hidden; margin: 1%;"
											data-ng-click="parentCtrl.selectPortfolio('unassigned')">
										Unassigned
									</button>
								</li>
							</ul>
						</div>
					</div>
					<div class="row">
						<div class="col-md-12">
							<script type="text/ng-template" id="portfolioTree">
								<button class="btn btn-default btn-sm" data-ng-click="parentCtrl.selectPortfolio(tree.node);"
										style="overflow: hidden; margin: 2%;">
									<span data-ng-bind="tree.node.name"></span>
								</button>
								<ul data-ng-if="tree.nodeTrees" class="">
									<li data-ng-repeat="tree in tree.nodeTrees track by $index" data-ng-include="'portfolioTree'"></li>
								</ul>
							</script>
							<ul class="">
								<li data-ng-repeat="tree in parentCtrl.portfolioTrees track by $index" data-ng-include="'portfolioTree'"></li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-md-9">
			<tabset>
				<tab heading="Financial">

				</tab>
				<tab heading="Qualitative">
					<br>
					<div class="row">
						<div class="col-md-12">
							<div data-ng-hide="parentCtrl.selectedPortfolio || parentCtrl.portfolios.length === 0" class="alert alert-warning text-center">
								Select a portfolio to see its details
							</div>
						</div>
					</div>
					<div class="row" data-ng-show="parentCtrl.selectedPortfolio">
						<div class="col-md-12">
							<div data-ng-show="error" class="text-danger">
								<strong data-ng-bind="error"></strong>
							</div>
							<div class="row">
								<div class="col-xs-6">
									<div class="panel panel-default">
										<div class="panel-heading">
											<h6 class="panel-title text-center">Ranking</h6>
										</div>
										<div class="panel-body">
											<div data-ng-hide="parentCtrl.selectedPortfolio" class="alert alert-warning text-center">
												Select a portfolio to see its details
											</div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="panel panel-default" style="margin: 0.1%">
                                                        <div><h5>&nbsp;Portfolio: <i>{{parentCtrl.selectedPortfolio.name}}</i></h5></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <hr>
											<div data-ng-show="parentCtrl.selectedPortfolio">
												<div class="row" style="min-height: 325px; max-height: 325px; overflow-y: auto">
													<div class="col-md-12">
														<div class="table-responsive">
															<table class="table table-bordered table-hover table-condensed small">
																<thead>
																<tr>
																	<th colspan="2" class="text-center">Ranking</th>
																	<th rowspan="2">Project</th>
																	<th rowspan="2">Score</th>
																</tr>
                                                                <tr>
                                                                    <th data-ng-show="parentCtrl.treeSelectionFlag === 'all' || parentCtrl.treeSelectionFlag === 'unassigned'">Overall</th>
                                                                    <th data-ng-show="parentCtrl.treeSelectionFlag === 'portfolio'">Portfolio</th>
                                                                    <th>By score</th>
                                                                </tr>
																</thead>
																<tbody>
                                                                <tr data-ng-show="!parentCtrl.qualitativeSummaryView.length">
                                                                    <td colspan="5">
                                                                        <div class="alert alert-warning text-center">
                                                                            No projects to show
                                                                        </div>
                                                                    </td>
                                                                </tr>
																<tr data-ng-repeat="profile in parentCtrl.qualitativeSummaryView | orderBy : 'qualitativeScore' : true" data-ng-click="parentCtrl.selectProjectProfile(profile)">
																	<td data-ng-show="parentCtrl.treeSelectionFlag === 'all' || parentCtrl.treeSelectionFlag === 'unassigned'">{{profile.overallRanking}}</td>
                                                                    <td data-ng-show="parentCtrl.treeSelectionFlag === 'portfolio'">{{profile.portfolioRanking}}</td>
                                                                    <td>{{$index + 1}}</td>
																	<td class="btn-link">{{profile.projectName}}</td>
																	<td>{{profile.qualitativeScore | number : 2}}</td>
																</tr>
																</tbody>
															</table>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
								<div class="col-xs-6" data-ng-show="parentCtrl.qualitativeSummaryView.length">
									<div class="panel panel-default">
										<div class="panel-heading">
											<h6 class="panel-title text-center">Qualitative profile</h6>
										</div>
										<div class="panel-body">
											<div data-ng-hide="parentCtrl.selectedProjectProfile" class="alert alert-warning text-center">
												Select a project to see its details
											</div>
											<div data-ng-show="parentCtrl.selectedProjectProfile">
												<div class="row">
													<div class="col-md-12">
														<div class="panel panel-default" style="margin: 0.1%">
															<div><h5>&nbsp;Project: <i>{{parentCtrl.selectedProjectProfile.projectName}}</i></h5></div>
														</div>
													</div>
												</div>
												<hr>
												<div class="row" style="min-height: 325px; max-height: 325px; overflow-y: auto">
													<div class="col-md-12">
														<div class="list-group" data-ng-repeat="groupObj in parentCtrl.selectedProjectProfile.qualitativeAnalysis | orderBy : 'weightedScore' : true">
															<div class="list-group-item" style="background-color: lightgrey">
																<h5 class="list-group-item-heading">
																	<span>{{groupObj.groupName}}</span>
																	<span class="badge" data-ng-bind="groupObj.weightedScore | number : 1"></span>
																</h5>
															</div>
															<div>
																<div class="list-group-item" style="overflow: hidden;" data-ng-repeat="impactObj in groupObj.impacts | orderBy : 'weightedScore' : true">
																	<span>{{impactObj.impactName}}</span>
																	<span class="badge" data-ng-bind="impactObj.weightedScore | number : 1"></span>
																</div>
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</tab>
				<tab heading="Risk">

				</tab>
			</tabset>
		</div>
	</div>
</section>
