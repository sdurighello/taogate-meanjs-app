<section data-ng-controller="PeopleSetupController" data-ng-init="init()">
	<br>
	<div class="row">
		<div class="col-sm-12">
			<div class="panel-heading">
				<ol class="breadcrumb">
					<li>Setup</li>
					<li>Portfolio definition</li>
					<li class="active">Stakeholders</li>
				</ol>
			</div>
		</div>
	</div>
    <div data-ng-show="initError" class="text-danger">
        <strong data-ng-bind="initError"></strong>
    </div>
	<div class="row">
		<div class="col-md-12">
			<tabset>
				<tab heading="People">
					<br>
					<div class="row">
                        <div class="col-md-4">
                            <div class="panel panel-default">
                                <div class="panel-body">
                                    <div class="alert alert-warning text-center" data-ng-hide="people.length">
                                        No people yet
                                    </div>
                                    <div class="row" data-ng-show="people.length">
                                        <div class="col-md-12">
                                            <input id="nameFilter" type="text" class="form-control" data-ng-model="filterName" placeholder="Filter by name">
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="row" style="min-height: 330px; max-height: 330px; overflow-y: auto">
                                        <div class="col-md-12">
                                            <button class="btn btn-default btn-block" data-ng-repeat="person in people | filter:filterName"
                                                    data-ng-click="selectPerson(person)" data-ng-bind="person.name">
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-5" data-ng-switch="switchPersonForm">
                            <div class="row" ng-show="userHasAuthorization" ng-switch-default="view">
                                <div class="col-md-12">
                                    <button class="btn btn-primary" data-ng-click="createPerson()">
                                        New person
                                    </button>
                                    <button class="btn btn-success" data-ng-click="selectPersonForm('edit')" data-ng-show="person">
                                        Edit person
                                    </button>
                                    <div data-ng-show="error" class="text-danger">
                                        <strong data-ng-bind="error"></strong>
                                    </div>
                                </div>
                            </div>
                            <br>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="panel panel-default">
                                        <div class="panel-heading">
                                            <h6 class="panel-title" data-ng-bind="person.name"></h6>
                                            <div class="text-center" data-ng-hide="person">
                                                <em>Please select a person to see the details</em>
                                            </div>
                                        </div>
                                        <div class="panel-body" data-ng-show="person">
                                            <div ng-switch-default="view">
                                                <form class="form">
                                                    <fieldset>
                                                        <div class="row">
                                                            <div class="col-md-12">
                                                                <div class="form-group">
                                                                    <label class="control-label" for="name">Name</label>
                                                                    <div class="controls">
                                                                        <input id="name" disabled type="text" class="form-control" ng-model="person.name">
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="control-label" for="org">Organization</label>
                                                                    <div class="controls">
                                                                        <input id="org" disabled type="text" class="form-control" ng-model="person.organization">
                                                                    </div>
                                                                </div>
																<div class="form-group">
																	<label class="control-label" for="title">Title</label>
																	<div class="controls">
																		<input id="title" disabled type="text" class="form-control" ng-model="person.title">
																	</div>
																</div>
                                                                <div class="form-group">
                                                                    <label class="control-label" for="email">Email</label>
                                                                    <div class="controls">
                                                                        <input id="email" disabled type="email" class="form-control" ng-model="person.email">
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="control-label" for="phone">Phone</label>
                                                                    <div class="controls">
                                                                        <input id="phone" disabled type="text" class="form-control" ng-model="person.phone">
                                                                    </div>
                                                                </div>
																<div class="form-group small">
																	<span data-ng-show="person.assignedUser">This person is a user</span>
																	<span data-ng-show="!person.assignedUser">This person is not a user</span>
																</div>
                                                                <div class="form-group">
                                                                    <div data-ng-show="error" class="text-danger">
                                                                        <strong data-ng-bind="error"></strong>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </fieldset>
                                                </form>
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <small>
                                                            <em class="text-muted">
                                                                Last updated on
                                                                <span data-ng-bind="person.created | date:'mediumDate'"></span>
                                                                by
                                                                <span data-ng-bind="person.user.displayName"></span>
                                                            </em>
                                                        </small>
                                                    </div>
                                                </div>
                                            </div>
                                            <div data-ng-switch-when="edit">
                                                <form class="form" name="editPersonForm" data-ng-submit="updatePerson(person)" novalidate>
                                                    <fieldset>
                                                        <div class="row">
                                                            <div class="col-md-12">
                                                                <div class="form-group">
                                                                    <label class="control-label" for="personNameEdit">Name</label>
                                                                    <div class="controls">
                                                                        <input id="personNameEdit" name="personNameEdit" type="text" class="form-control" ng-model="person.name" required>
																<span data-ng-show="editPersonForm.personNameEdit.$error.required">
																	<em style="color: red">Name is required</em>
																</span>
                                                                    </div>
                                                                </div>
																<div class="form-group">
																	<label class="control-label" for="orgEdit">Organization</label>
																	<div class="controls">
																		<input id="orgEdit" type="text" class="form-control" ng-model="person.organization">
																	</div>
																</div>
                                                                <div class="form-group">
                                                                    <label class="control-label" for="titleEdit">Title</label>
                                                                    <div class="controls">
                                                                        <input id="titleEdit" type="text" class="form-control" ng-model="person.title">
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="control-label" for="emailEdit">Email</label>
                                                                    <div class="controls">
                                                                        <input id="emailEdit" name="emailEdit" type="email" class="form-control" ng-model="person.email">
                                                                    </div>
                                                                    <span class="error" ng-show="editPersonForm.emailEdit.$error.email">Not a valid email address</span>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="control-label" for="phoneEdit">Phone</label>
                                                                    <div class="controls">
                                                                        <input id="phoneEdit" type="text" class="form-control" ng-model="person.phone">
                                                                    </div>
                                                                </div>
																<div class="form-group small">
																	<span data-ng-show="person.assignedUser">This person is a user</span>
																	<span data-ng-show="!person.assignedUser">This person is not a user</span>
																</div>
                                                                <div class="pull-right">
                                                                    <input type="submit" value="Save" class="btn btn-success" ng-disabled="editPersonForm.$invalid">
                                                                    <a class="btn btn-danger" data-ng-click="removePerson(person)">
                                                                        <i class="glyphicon glyphicon-trash"></i>
                                                                    </a>
                                                                    <button type="button" class="btn btn-info" ng-click="cancelEditPerson(person)">
                                                                        Cancel
                                                                    </button>
                                                                </div>
                                                                <div class="form-group">
                                                                    <div data-ng-show="error" class="text-danger">
                                                                        <strong data-ng-bind="error"></strong>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </fieldset>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
					</div>
				</tab>
				<tab heading="Project stakeholders">
					<br>
					<div ng-show="userHasAuthorization">
						<div class="row">
							<div class="col-md-3">
								<br>
								<button class="btn btn-primary" ng-click="createProjectGroup()">
									New group
								</button>
								<div data-ng-show="error" class="text-danger">
									<strong data-ng-bind="error"></strong>
								</div>
							</div>
						</div>
						<hr>
					</div>
					<div class="row">
						<div class="col-md-12 form-group" data-ng-repeat="group in peopleProjectGroups track by $index">
							<button class="btn btn-default btn-lg btn-block" data-ng-bind="group.name" data-ng-click="viewProjectGroupDetails = !viewProjectGroupDetails"
									title="Last updated on {{group.created | date:'medium'}} by {{group.user.displayName}}"></button>
							<div data-ng-show="viewProjectGroupDetails">
								<div class="panel panel-default" >
									<div class="panel-body">
										<div class="row">
											<div class="col-md-12">
												<div class="panel panel-default" data-ng-switch="switchProjectGroupForm[group._id]">
													<div class="panel-body" ng-switch-default="view">
														<div class="row">
															<div class="col-md-7 form-group">
																<label for="groupName" class="control-label">Group name</label>
																<input disabled id="groupName" type="text" class="form-control" data-ng-model="group.name">
															</div>
														</div>
														<div class="row">
															<div class="col-md-12 form-group">
																<label for="groupDescription" class="control-label">Group description</label>
																<textarea disabled id="groupDescription" data-ng-model="group.description" class="form-control" placeholder="No description yet"></textarea>
															</div>
														</div>
														<div class="row" ng-show="userHasAuthorization">
															<div class="col-md-12">
																<div class="form-group pull-right">
																	<button class="btn btn-success" data-ng-click="selectProjectGroup(group)">Edit</button>
																</div>
															</div>
														</div>
													</div>
													<div class="panel-body" ng-switch-when="edit">
														<form name="editProjectGroupForm" novalidate>
															<fieldset>
																<div class="row">
																	<div class="col-md-12">
																		<div class="panel-body">
																			<div class="row">
																				<div class="col-md-7 form-group">
																					<label for="projectGroupNameEdit" class="control-label">Group name</label>
																					<input id="projectGroupNameEdit" name="projectGroupNameEdit" type="text" class="form-control" data-ng-model="group.name" required>
																					<span data-ng-show="editProjectGroupForm.projectGroupNameEdit.$error.required">
																						<em style="color: red">Name is required</em>
																					</span>
																				</div>
																			</div>
																			<div class="row">
																				<div class="col-md-12 form-group">
																					<label for="groupDescription" class="control-label">Group description</label>
																					<textarea id="groupDescription" data-ng-model="group.description" class="form-control" placeholder="No description yet"></textarea>
																				</div>
																			</div>
																		</div>
																	</div>
																</div>
																<div class="row">
																	<div class="col-md-12">
																		<div class="form-group pull-right">
																			<button type="button" class="btn btn-success" data-ng-click="updateProjectGroup(group)" data-ng-disabled="editProjectGroupForm.$invalid">
																				Save
																			</button>
																			<button type="button" class="btn btn-danger" data-ng-click="removeProjectGroup(group)">
																				Delete group
																			</button>
																			<button type="button" class="btn btn-info" data-ng-click="cancelEditProjectGroup(group)">
																				Cancel
																			</button>
																			<div data-ng-show="error" class="text-danger">
																				<strong data-ng-bind="error"></strong>
																			</div>
																		</div>
																	</div>
																</div>
															</fieldset>
														</form>
													</div>
												</div>
											</div>
										</div>
										<div class="row">
											<div class="col-md-12">
												<div class="panel panel-default">
													<div class="panel-body">
														<div class="row" ng-show="userHasAuthorization">
															<div class="col-md-3">
																<div class="form-group">
																	<button type="button" class="btn btn-primary" ng-click="createProjectRole(group)">
																		New role
																	</button>
																</div>
																<div data-ng-show="error" class="text-danger">
																	<strong data-ng-bind="error"></strong>
																</div>
															</div>
														</div>
														<div class="row">
															<div class="col-md-4 form-group" data-ng-repeat="role in group.roles track by $index" data-ng-switch="switchProjectRoleForm[role._id]">
																<button class="btn btn-default btn-lg btn-block" data-ng-bind="role.name" data-ng-click="viewProjectRoleDetails = !viewProjectRoleDetails"
																		title="Last updated on {{role.created | date:'medium'}} by {{role.user.displayName}}"></button>
																<div data-ng-show="viewProjectRoleDetails">
																	<div class="panel panel-default">
																		<div class="panel-body" ng-switch-default="view">
																			<div class="row">
																				<div class="col-md-12">
																					<form>
																						<fieldset>
																							<div class="row">
																								<div class="form-group col-md-12">
																									<label for="roleName" class="control-label">Role name</label>
																									<input disabled id="roleName" type="text" class="form-control" data-ng-model="role.name">
																								</div>
																							</div>
																							<div class="row">
																								<div class="form-group col-md-12">
																									<label for="roleDescription" class="control-label">Role description</label>
																									<textarea disabled id="roleDescription" data-ng-model="role.description" class="form-control" placeholder="No description yet"></textarea>
																								</div>
																							</div>
																						</fieldset>
																					</form>
																					<div class="row" ng-show="userHasAuthorization">
																						<div class="form-group col-md-12 pull-right">
																							<button type="button" class="btn btn-success pull-right"
																									data-ng-click="selectEditProjectRole(group, role)">
																								Edit
																							</button>
																						</div>
																					</div>
																				</div>
																			</div>
																		</div>
																		<div class="panel-body" ng-switch-when="edit">
																			<div class="row" >
																				<div class="col-md-12">
																					<form name="editProjectRoleForm" novalidate>
																						<fieldset>
																							<div class="row">
																								<div class="form-group col-md-12">
																									<label for="roleNameEdit" class="control-label">Role name</label>
																									<input id="roleNameEdit" name="roleNameEdit" type="text" class="form-control" data-ng-model="role.name" required>
																									<span data-ng-show="editProjectRoleForm.roleNameEdit.$error.required">
                                                                                                        <em style="color: red">Name is required</em>
                                                                                                    </span>
																								</div>
																							</div>
																							<div class="row">
																								<div class="form-group col-md-12">
																									<label for="roleDescription" class="control-label">Role description</label>
																									<textarea id="roleDescription" data-ng-model="role.description" class="form-control" placeholder="No description yet"></textarea>
																								</div>
																							</div>
																							<div class="row">
																								<div class="col-md-12">
																									<div class="form-group pull-right">
																										<button type="button" class="btn btn-success" ng-click="updateProjectRole(group, role)" data-ng-disabled="editProjectRoleForm.$invalid">
																											Save
																										</button>
																										<a class="btn btn-danger" data-ng-click="removeProjectRole(group, role)">
																											<i class="glyphicon glyphicon-trash"></i>
																										</a>
																										<button type="button" class="btn btn-info" ng-click="cancelEditProjectRole(role)">
																											Cancel
																										</button>
																									</div>
																								</div>
																							</div>
																							<div data-ng-show="error" class="text-danger">
																								<strong data-ng-bind="error"></strong>
																							</div>
																						</fieldset>
																					</form>
																				</div>
																			</div>
																		</div>
																	</div>
																</div>
															</div>
														</div>
														<div class="alert alert-warning text-center" data-ng-show="peopleGroup.roles.length === 0">
															No roles added to this group yet
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="alert alert-warning text-center" data-ng-hide="!peopleGroups.$resolved || peopleGroups.length">
						No project stakeholders groups yet
					</div>
				</tab>
				<tab heading="Portfolio stakeholders">
					<br>
					<div ng-show="userHasAuthorization">
						<div class="row">
							<div class="col-md-3">
								<br>
								<button class="btn btn-primary" ng-click="createPortfolioGroup()">
									New group
								</button>
								<div data-ng-show="error" class="text-danger">
									<strong data-ng-bind="error"></strong>
								</div>
							</div>
						</div>
						<hr>
					</div>
					<div class="row">
						<div class="col-md-12 form-group" data-ng-repeat="group in peoplePortfolioGroups track by $index">
							<button class="btn btn-default btn-lg btn-block" data-ng-bind="group.name" data-ng-click="viewPortfolioGroupDetails = !viewPortfolioGroupDetails"
									title="Last updated on {{group.created | date:'medium'}} by {{group.user.displayName}}"></button>
							<div data-ng-show="viewPortfolioGroupDetails">
								<div class="panel panel-default" >
									<div class="panel-body">
										<div class="row">
											<div class="col-md-12">
												<div class="panel panel-default" data-ng-switch="switchPortfolioGroupForm[group._id]">
													<div class="panel-body" ng-switch-default="view">
														<div class="row">
															<div class="col-md-7 form-group">
																<label for="groupName" class="control-label">Group name</label>
																<input disabled id="groupName" type="text" class="form-control" data-ng-model="group.name">
															</div>
														</div>
														<div class="row">
															<div class="col-md-12 form-group">
																<label for="groupDescription" class="control-label">Group description</label>
																<textarea disabled id="groupDescription" data-ng-model="group.description" class="form-control" placeholder="No description yet"></textarea>
															</div>
														</div>
														<div class="row" ng-show="userHasAuthorization">
															<div class="col-md-12">
																<div class="form-group pull-right">
																	<button class="btn btn-success" data-ng-click="selectPortfolioGroup(group)">Edit</button>
																</div>
															</div>
														</div>
													</div>
													<div class="panel-body" ng-switch-when="edit">
														<form name="editPortfolioGroupForm" novalidate>
															<fieldset>
																<div class="row">
																	<div class="col-md-12">
																		<div class="panel-body">
																			<div class="row">
																				<div class="col-md-7 form-group">
																					<label for="portfolioGroupNameEdit" class="control-label">Group name</label>
																					<input id="portfolioGroupNameEdit" name="portfolioGroupNameEdit" type="text" class="form-control" data-ng-model="group.name" required>
																					<span data-ng-show="editPortfolioGroupForm.portfolioGroupNameEdit.$error.required">
																						<em style="color: red">Name is required</em>
																					</span>
																				</div>
																			</div>
																			<div class="row">
																				<div class="col-md-12 form-group">
																					<label for="groupDescription" class="control-label">Group description</label>
																					<textarea id="groupDescription" data-ng-model="group.description" class="form-control" placeholder="No description yet"></textarea>
																				</div>
																			</div>
																		</div>
																	</div>
																</div>
																<div class="row">
																	<div class="col-md-12">
																		<div class="form-group pull-right">
																			<button type="button" class="btn btn-success" data-ng-click="updatePortfolioGroup(group)" data-ng-disabled="editPortfolioGroupForm.$invalid">
																				Save
																			</button>
																			<button type="button" class="btn btn-danger" data-ng-click="removePortfolioGroup(group)">
																				Delete group
																			</button>
																			<button type="button" class="btn btn-info" data-ng-click="cancelEditPortfolioGroup(group)">
																				Cancel
																			</button>
																			<div data-ng-show="error" class="text-danger">
																				<strong data-ng-bind="error"></strong>
																			</div>
																		</div>
																	</div>
																</div>
															</fieldset>
														</form>
													</div>
												</div>
											</div>
										</div>
										<div class="row">
											<div class="col-md-12">
												<div class="panel panel-default">
													<div class="panel-body">
														<div class="row" ng-show="userHasAuthorization">
															<div class="col-md-3">
																<div class="form-group">
																	<button type="button" class="btn btn-primary" ng-click="createPortfolioRole(group)">
																		New role
																	</button>
																</div>
																<div data-ng-show="error" class="text-danger">
																	<strong data-ng-bind="error"></strong>
																</div>
															</div>
														</div>
														<div class="row">
															<div class="col-md-4 form-group" data-ng-repeat="role in group.roles track by $index" data-ng-switch="switchPortfolioRoleForm[role._id]">
																<button class="btn btn-default btn-lg btn-block" data-ng-bind="role.name" data-ng-click="viewPortfolioRoleDetails = !viewPortfolioRoleDetails"
																		title="Last updated on {{role.created | date:'medium'}} by {{role.user.displayName}}"></button>
																<div data-ng-show="viewPortfolioRoleDetails">
																	<div class="panel panel-default">
																		<div class="panel-body" ng-switch-default="view">
																			<div class="row">
																				<div class="col-md-12">
																					<form>
																						<fieldset>
																							<div class="row">
																								<div class="form-group col-md-12">
																									<label for="roleName" class="control-label">Role name</label>
																									<input disabled id="roleName" type="text" class="form-control" data-ng-model="role.name">
																								</div>
																							</div>
																							<div class="row">
																								<div class="form-group col-md-12">
																									<label for="roleDescription" class="control-label">Role description</label>
																									<textarea disabled id="roleDescription" data-ng-model="role.description" class="form-control" placeholder="No description yet"></textarea>
																								</div>
																							</div>
																						</fieldset>
																					</form>
																					<div class="row" ng-show="userHasAuthorization">
																						<div class="form-group col-md-12 pull-right">
																							<button type="button" class="btn btn-success pull-right"
																									data-ng-click="selectEditPortfolioRole(group, role)">
																								Edit
																							</button>
																						</div>
																					</div>
																				</div>
																			</div>
																		</div>
																		<div class="panel-body" ng-switch-when="edit">
																			<div class="row" >
																				<div class="col-md-12">
																					<form name="editPortfolioRoleForm" novalidate>
																						<fieldset>
																							<div class="row">
																								<div class="form-group col-md-12">
																									<label for="roleNameEdit" class="control-label">Role name</label>
																									<input id="roleNameEdit" name="roleNameEdit" type="text" class="form-control" data-ng-model="role.name" required>
																									<span data-ng-show="editPortfolioRoleForm.roleNameEdit.$error.required">
                                                                                                        <em style="color: red">Name is required</em>
                                                                                                    </span>
																								</div>
																							</div>
																							<div class="row">
																								<div class="form-group col-md-12">
																									<label for="roleDescription" class="control-label">Role description</label>
																									<textarea id="roleDescription" data-ng-model="role.description" class="form-control" placeholder="No description yet"></textarea>
																								</div>
																							</div>
																							<div class="row">
																								<div class="col-md-12">
																									<div class="form-group pull-right">
																										<button type="button" class="btn btn-success" ng-click="updatePortfolioRole(group, role)" data-ng-disabled="editPortfolioRoleForm.$invalid">
																											Save
																										</button>
																										<a class="btn btn-danger" data-ng-click="removePortfolioRole(group, role)">
																											<i class="glyphicon glyphicon-trash"></i>
																										</a>
																										<button type="button" class="btn btn-info" ng-click="cancelEditPortfolioRole(role)">
																											Cancel
																										</button>
																									</div>
																								</div>
																							</div>
																							<div data-ng-show="error" class="text-danger">
																								<strong data-ng-bind="error"></strong>
																							</div>
																						</fieldset>
																					</form>
																				</div>
																			</div>
																		</div>
																	</div>
																</div>
															</div>
														</div>
														<div class="alert alert-warning text-center" data-ng-show="peopleGroup.roles.length === 0">
															No roles added to this group yet
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="alert alert-warning text-center" data-ng-hide="!peopleGroups.$resolved || peopleGroups.length">
						No portfolio stakeholders groups yet
					</div>
				</tab>
                <tab heading="Stakeholder categories">
                    <br>
                    <div class="row" data-ng-show="userHasAuthorization">
                        <div class="col-md-3">
                            <br>
                            <button class="btn btn-primary" ng-click="createCategory()">
                                New stakeholder category
                            </button>
                            <div data-ng-show="error" class="text-danger">
                                <strong data-ng-bind="error"></strong>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="row">
                        <div class="col-md-12 form-group" data-ng-repeat="category in peopleCategories track by $index">
                            <button class="btn btn-default btn-block btn-lg" data-ng-bind="category.name" data-ng-click="viewCategoryDetails = !viewCategoryDetails"
                                    title="Last updated on {{category.created | date:'medium'}} by {{category.user.displayName}}" style="overflow: hidden;"></button>
                            <div data-ng-show="viewCategoryDetails">
                                <div class="panel panel-default" >
                                    <div class="panel-body">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="panel panel-default" data-ng-switch="switchCategoryForm[category._id]">
                                                    <div class="panel-body" ng-switch-default="view">
                                                        <form>
                                                            <fieldset>
                                                                <div class="row">
                                                                    <div class="col-md-7 form-group">
                                                                        <label for="categoryName" class="control-label">Category name</label>
                                                                        <input disabled id="categoryName" type="text" class="form-control" data-ng-model="category.name">
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-md-12 form-group">
                                                                        <label for="categoryDescription" class="control-label">Category description</label>
                                                                        <textarea disabled id="categoryDescription" data-ng-model="category.description" class="form-control" placeholder="No description yet"></textarea>
                                                                    </div>
                                                                </div>
                                                                <div class="row" data-ng-show="userHasAuthorization">
                                                                    <div class="col-md-12">
                                                                        <div class="pull-right">
                                                                            <button class="btn btn-success" data-ng-click="selectCategory(category)">Edit</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </fieldset>
                                                        </form>
                                                    </div>
                                                    <div class="panel-body" ng-switch-when="edit">
                                                        <form name="editCategoryForm" novalidate>
                                                            <fieldset>
                                                                <div class="row">
                                                                    <div class="col-md-12">
                                                                        <div class="row">
                                                                            <div class="col-md-7 form-group">
                                                                                <label for="categoryNameEdit" class="control-label">Category name</label>
                                                                                <input id="categoryNameEdit" name="categoryNameEdit" type="text" class="form-control" data-ng-model="category.name" required>
																				<span data-ng-show="editCategoryForm.categoryNameEdit.$error.required">
																					<em style="color: red">Name is required</em>
																				</span>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class="col-md-12 form-group">
                                                                                <label for="categoryDescription" class="control-label">Category description</label>
                                                                                <textarea id="categoryDescription" data-ng-model="category.description" class="form-control" placeholder="No description yet"></textarea>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-md-12">
                                                                        <div class="pull-right">
                                                                            <button type="button" class="btn btn-success" data-ng-click="updateCategory(category)" data-ng-disabled="editCategoryForm.$invalid">
                                                                                Save
                                                                            </button>
                                                                            <button type="button" class="btn btn-danger" data-ng-click="removeCategory(category)">
                                                                                Delete Category
                                                                            </button>
                                                                            <button type="button" class="btn btn-info" data-ng-click="cancelEditCategory(category)">
                                                                                Cancel
                                                                            </button>
                                                                            <div data-ng-show="error" class="text-danger">
                                                                                <strong data-ng-bind="error"></strong>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </fieldset>
                                                        </form>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="panel panel-default">
                                                    <div class="panel-body">
                                                        <div class="row" data-ng-show="userHasAuthorization">
                                                            <div class="col-md-3">
                                                                <div class="form-group">
                                                                    <button type="button" class="btn btn-primary" ng-click="createCategoryValue(category)">
                                                                        New category value
                                                                    </button>
                                                                </div>
                                                                <div data-ng-show="error" class="text-danger">
                                                                    <strong data-ng-bind="error"></strong>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <hr>
                                                        <div class="row">
                                                            <div class="col-md-4 form-group" data-ng-repeat="categoryValue in category.categoryValues track by $index" data-ng-switch="switchCategoryValueForm[categoryValue._id]">
                                                                <button class="btn btn-default btn-block btn-lg" data-ng-bind="categoryValue.name" data-ng-click="viewCategoryValueDetails = !viewCategoryValueDetails"
                                                                        title="Last updated on {{categoryValue.created | date:'medium'}} by {{categoryValue.user.displayName}}" style="overflow: hidden;"></button>
                                                                <div data-ng-show="viewCategoryValueDetails">
                                                                    <div class="panel panel-default">
                                                                        <div class="panel-body" ng-switch-default="view">
                                                                            <div class="row">
                                                                                <div class="col-md-12">
                                                                                    <form>
                                                                                        <fieldset>
                                                                                            <div class="row">
                                                                                                <div class="form-group col-md-12">
                                                                                                    <label for="categoryValueName" class="control-label">Value name</label>
                                                                                                    <input disabled id="categoryValueName" type="text" class="form-control" data-ng-model="categoryValue.name">
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="row">
                                                                                                <div class="form-group col-md-12">
                                                                                                    <label for="categoryValueDescription" class="control-label">Value description</label>
                                                                                                    <textarea disabled id="categoryValueDescription" data-ng-model="categoryValue.description" class="form-control" placeholder="No description yet"></textarea>
                                                                                                </div>
                                                                                            </div>
                                                                                        </fieldset>
                                                                                    </form>
                                                                                    <div class="row" data-ng-show="userHasAuthorization">
                                                                                        <div class="col-md-12 pull-right">
                                                                                            <button type="button" class="btn btn-success pull-right"
                                                                                                    data-ng-click="selectEditCategoryValue(category, categoryValue)">
                                                                                                Edit
                                                                                            </button>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="panel-body" ng-switch-when="edit">
                                                                            <div class="row" >
                                                                                <div class="col-md-12">
                                                                                    <form name="editCategoryValueForm" novalidate>
                                                                                        <fieldset>
                                                                                            <div class="row">
                                                                                                <div class="form-group col-md-12">
                                                                                                    <label for="categoryValueNameEdit" class="control-label">Value name</label>
                                                                                                    <input id="categoryValueNameEdit" name="categoryValueNameEdit" type="text" class="form-control" data-ng-model="categoryValue.name" required>
																								<span data-ng-show="editCategoryValueForm.categoryValueNameEdit.$error.required">
																									<em style="color: red">Name is required</em>
																								</span>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="row">
                                                                                                <div class="form-group col-md-12">
                                                                                                    <label for="categoryValueDescription" class="control-label">Value description</label>
                                                                                                    <textarea id="categoryValueDescription" data-ng-model="categoryValue.description" class="form-control" placeholder="No description yet"></textarea>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="row">
                                                                                                <div class="col-md-12">
                                                                                                    <div class="pull-right">
                                                                                                        <button type="button" class="btn btn-success" ng-click="updateCategoryValue(category, categoryValue)" data-ng-disabled="editCategoryValueForm.$invalid">
                                                                                                            Save
                                                                                                        </button>
                                                                                                        <a class="btn btn-danger" data-ng-click="removeCategoryValue(category, categoryValue)">
                                                                                                            <i class="glyphicon glyphicon-trash"></i>
                                                                                                        </a>
                                                                                                        <button type="button" class="btn btn-info" ng-click="cancelEditCategoryValue(categoryValue)">
                                                                                                            Cancel
                                                                                                        </button>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div data-ng-show="error" class="text-danger">
                                                                                                <strong data-ng-bind="error"></strong>
                                                                                            </div>
                                                                                        </fieldset>
                                                                                    </form>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="alert alert-warning text-center" data-ng-show="category.categoryValues.length === 0">
                                                            No category values added to this category yet
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="alert alert-warning text-center" data-ng-show="peopleCategories.length === 0">
                        No stakeholder categories yet
                    </div>
                </tab>
			</tabset>
		</div>
	</div>
</section>
